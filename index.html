<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RQEEB PRO | Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø¨ØµØ±ÙŠ Ø§Ù„Ø°ÙƒÙŠ</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.18.0/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fft-js@1.0.0/fft.min.js"></script>
  <style>
    :root {
      --primary: #ff8800;
      --primary-dark: #e67700;
      --dark-bg: #0b0b0b;
      --card-bg: #1a1a1a;
      --text: #fff;
      --warning: #ffcc00;
      --danger: #ff3333;
      --success: #4CAF50;
      --info: #2196F3;
      --box-left: #00cc66;
      --box-right: #ff4d4d;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      background: linear-gradient(135deg, #070707, #0f0f0f);
      color: var(--text);
      font-family: 'Tajawal', 'Segoe UI', sans-serif;
      text-align: center;
      padding: 1.5rem;
      line-height: 1.6;
      min-height: 100vh;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    header {
      margin-bottom: 2rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid #222;
      position: relative;
    }
    
    h1 {
      font-size: 2.4rem;
      margin-bottom: 0.8rem;
      color: var(--primary);
      text-shadow: 0 0 10px rgba(255, 165, 0, 0.3);
      position: relative;
      display: inline-block;
    }
    
    h1:after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 4px;
      background: var(--primary);
      border-radius: 2px;
    }
    
    .subtitle {
      color: #bbb;
      font-size: 1.1rem;
      max-width: 800px;
      margin: 0.8rem auto 0;
      line-height: 1.8;
    }
    
    .nav-tabs {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin: 2rem 0;
      flex-wrap: wrap;
    }
    
    .tab-btn {
      padding: 0.8rem 1.5rem;
      background: #252525;
      border: 1px solid #333;
      border-radius: 30px;
      color: #bbb;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1.1rem;
    }
    
    .tab-btn.active {
      background: var(--primary);
      color: #000;
      font-weight: bold;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }
    
    .video-container {
      position: relative;
      width: 100%;
      max-width: 700px;
      margin: 2rem auto;
      border-radius: 18px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      border: 1px solid #333;
    }
    
    video {
      width: 100%;
      display: block;
      background: #000;
    }
    
    .boxes {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
    
    .box {
      position: absolute;
      width: 240px;
      height: 240px;
      border: 3px solid;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
      transition: all 0.3s ease;
    }
    
    .box-left {
      top: 50px;
      left: 30px;
      border-color: var(--box-left);
      box-shadow: 0 0 20px rgba(0, 204, 102, 0.3);
    }
    
    .box-right {
      top: 50px;
      right: 30px;
      border-color: var(--box-right);
      box-shadow: 0 0 20px rgba(255, 77, 77, 0.3);
    }
    
    .box-label {
      position: absolute;
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.7);
      color: #fff;
      padding: 0.3rem 1rem;
      border-radius: 20px;
      font-weight: bold;
      font-size: 1rem;
    }
    
    .box-left .box-label {
      background: var(--box-left);
    }
    
    .box-right .box-label {
      background: var(--box-right);
    }
    
    .controls {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      margin: 1.5rem 0;
      flex-wrap: wrap;
    }
    
    button {
      padding: 1rem 2rem;
      font-size: 1.2rem;
      border-radius: 12px;
      border: none;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: #000;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.8rem;
      box-shadow: 0 5px 15px rgba(230, 119, 0, 0.3);
      min-width: 250px;
    }
    
    button:hover {
      transform: scale(1.05);
      box-shadow: 0 7px 20px rgba(230, 119, 0, 0.4);
    }
    
    button:disabled {
      background: #444;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
      color: #777;
    }
    
    #confirmBtn {
      background: linear-gradient(135deg, #00cc66, #00b359);
      box-shadow: 0 5px 15px rgba(0, 179, 89, 0.3);
    }
    
    #confirmBtn:hover {
      box-shadow: 0 7px 20px rgba(0, 179, 89, 0.4);
    }
    
    .results-container {
      background: linear-gradient(145deg, #1a1a1a, #222);
      border-radius: 18px;
      padding: 2rem;
      margin: 2rem auto;
      max-width: 800px;
      border: 1px solid #333;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
    }
    
    .results-header {
      font-size: 1.6rem;
      margin-bottom: 1.5rem;
      color: var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      text-shadow: 0 0 8px rgba(255, 136, 0, 0.3);
    }
    
    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.2rem;
      margin-top: 1.5rem;
    }
    
    .metric {
      background: linear-gradient(145deg, #1e1e1e, #252525);
      padding: 1.2rem;
      border-radius: 15px;
      text-align: center;
      border: 1px solid #333;
      transition: all 0.3s ease;
    }
    
    .metric:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3);
    }
    
    .metric-value {
      font-size: 1.8rem;
      font-weight: bold;
      margin: 0.8rem 0;
      color: var(--primary);
      text-shadow: 0 0 8px rgba(255, 136, 0, 0.3);
    }
    
    .metric-label {
      font-size: 1rem;
      color: #bbb;
    }
    
    .verdict {
      font-size: 1.5rem;
      font-weight: bold;
      margin-top: 2rem;
      padding: 1.5rem;
      border-radius: 15px;
      text-align: center;
      animation: pulse 2s infinite;
    }
    
    .verdict.safe {
      background: rgba(76, 175, 80, 0.15);
      color: var(--success);
      border: 2px solid var(--success);
    }
    
    .verdict.warning {
      background: rgba(255, 204, 0, 0.15);
      color: var(--warning);
      border: 2px solid var(--warning);
    }
    
    .verdict.danger {
      background: rgba(255, 51, 51, 0.15);
      color: var(--danger);
      border: 2px solid var(--danger);
    }
    
    .analysis-details {
      margin-top: 2rem;
      text-align: right;
      background: rgba(30, 30, 30, 0.5);
      padding: 1.5rem;
      border-radius: 15px;
      border: 1px solid #333;
    }
    
    .analysis-details h3 {
      margin-bottom: 1.2rem;
      color: var(--primary);
      font-size: 1.4rem;
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }
    
    .instructions {
      background: rgba(30, 30, 30, 0.7);
      padding: 1.5rem;
      border-radius: 15px;
      margin: 2rem auto;
      max-width: 800px;
      border: 1px solid #333;
      text-align: right;
    }
    
    .instructions h3 {
      color: var(--primary);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }
    
    .instructions ol {
      padding-right: 1.5rem;
      margin-top: 1rem;
    }
    
    .instructions li {
      margin-bottom: 0.8rem;
      line-height: 1.7;
    }
    
    footer {
      margin-top: 3rem;
      font-size: 1rem;
      color: #777;
      padding-top: 2rem;
      border-top: 1px solid #333;
      line-height: 1.8;
    }
    
    .file-upload {
      background: #252525;
      border-radius: 15px;
      padding: 1.5rem;
      margin: 1.5rem auto;
      max-width: 600px;
      border: 2px dashed #444;
      transition: all 0.3s ease;
    }
    
    .file-upload:hover {
      border-color: var(--primary);
      background: #2a2a2a;
    }
    
    .file-upload h3 {
      margin-bottom: 1.2rem;
      color: #ddd;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.8rem;
      font-size: 1.3rem;
    }
    
    input[type="file"] {
      width: 100%;
      padding: 1rem;
      background: #333;
      border: none;
      border-radius: 12px;
      color: #ddd;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    input[type="file"]:hover {
      background: #3a3a3a;
    }
    
    input[type="file"]::file-selector-button {
      background: var(--primary);
      color: #000;
      border: none;
      padding: 0.6rem 1.2rem;
      border-radius: 8px;
      margin-right: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    input[type="file"]::file-selector-button:hover {
      background: var(--primary-dark);
    }
    
    .image-previews {
      display: flex;
      justify-content: space-around;
      margin: 2rem 0;
      gap: 2rem;
      flex-wrap: wrap;
    }
    
    .image-preview {
      width: 100%;
      max-width: 350px;
      background: #2a2a2a;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
      transition: all 0.4s ease;
    }
    
    .image-preview:hover {
      transform: translateY(-10px);
      box-shadow: 0 12px 25px rgba(0, 0, 0, 0.5);
    }
    
    .image-preview img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      display: block;
    }
    
    .image-preview p {
      padding: 1rem;
      color: #ddd;
      font-size: 1.1rem;
      background: #252525;
    }
    
    .region-label {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.7);
      color: var(--primary);
      padding: 0.3rem 0.8rem;
      border-radius: 5px;
      font-size: 0.9rem;
    }
    
    .status {
      margin: 1rem 0;
      padding: 0.8rem;
      background: rgba(255, 136, 0, 0.1);
      border-radius: 10px;
      color: var(--primary);
      font-weight: bold;
      border: 1px solid var(--primary);
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.02); }
      100% { transform: scale(1); }
    }
    
    .hidden {
      display: none;
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
      .video-container {
        max-width: 100%;
      }
      
      .box {
        width: 180px;
        height: 180px;
      }
      
      .box-left {
        top: 30px;
        left: 15px;
      }
      
      .box-right {
        top: 30px;
        right: 15px;
      }
      
      .controls {
        flex-direction: column;
        align-items: center;
      }
      
      button {
        width: 100%;
        max-width: 300px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1><i class="fas fa-file-contract"></i> RQEEB PRO - Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªÙ‚Ø¯Ù… Ù„ÙƒØ´Ù Ø§Ù„ØªØ²ÙˆÙŠØ±</h1>
      <p class="subtitle">
        Ø­Ù„ÙˆÙ„ Ù…ØªÙƒØ§Ù…Ù„Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… ÙˆØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ø­Ø§Ø³ÙˆØ¨ÙŠØ©
      </p>
    </header>

    <div class="nav-tabs">
      <div class="tab-btn active" data-tab="camera-tab">ÙƒØ§Ù…ÙŠØ±Ø§ Ù…Ø¨Ø§Ø´Ø±Ø©</div>
      <div class="tab-btn" data-tab="upload-tab">Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±</div>
      <div class="tab-btn" data-tab="single-tab">ØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø©</div>
      <div class="tab-btn" data-tab="settings-tab">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div>
    </div>

    <!-- Camera Tab -->
    <div id="camera-tab" class="tab-content active">
      <div class="instructions">
        <h3><i class="fas fa-info-circle"></i> ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±:</h3>
        <ol>
          <li>Ø£Ù…Ø³Ùƒ Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ø£ØµÙ„ÙŠ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø£Ø®Ø¶Ø± ÙˆØ§Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ù…Ø´ÙƒÙˆÙƒ ÙÙŠÙ‡ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø£Ø­Ù…Ø±</li>
          <li>ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¶ÙˆØ­ Ø§Ù„Ù…Ø³ØªÙ†Ø¯ÙŠÙ† ÙˆØ¸Ù‡ÙˆØ±Ù‡Ù…Ø§ Ø¨Ø´ÙƒÙ„ ÙƒØ§Ù…Ù„ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª</li>
          <li>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± "Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…" Ù„Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ­Ù‚Ù‚</li>
          <li>Ø§Ù‚Ø±Ø£ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ù„ÙŠÙ„ ÙˆØªØµØ±Ù Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆØµÙŠØ§Øª</li>
        </ol>
        <div class="status" id="cameraStatus">âŒ› Ø¬Ø§Ø±ÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§...</div>
      </div>

      <div class="video-container">
        <video id="video" autoplay playsinline></video>
        <div class="boxes">
          <div class="box box-left">
            <div class="box-label">Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ø£ØµÙ„ÙŠ</div>
          </div>
          <div class="box box-right">
            <div class="box-label">Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ù…Ø´ÙƒÙˆÙƒ ÙÙŠÙ‡</div>
          </div>
        </div>
      </div>

      <div class="controls">
        <button id="analyzeBtn" onclick="startSingleImageAnalysis()">
          <i class="fas fa-microscope"></i> Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
        </button>
        <button id="confirmBtn" onclick="confirmMatch()" class="hidden">
          <i class="fas fa-check-circle"></i> ØªØ­Ù‚Ù‚ ÙØ¹Ù„ÙŠ
        </button>
      </div>

      <div class="results-container hidden" id="resultsContainer">
        <div class="results-header">
          <i class="fas fa-chart-bar"></i> Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
        </div>
        <div id="results"></div>
      </div>
    </div>

    <!-- Upload Tab -->
    <div id="upload-tab" class="tab-content">
      <div class="instructions">
        <h3><i class="fas fa-cloud-upload-alt"></i> ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ù„Ù„ØªØ­Ù„ÙŠÙ„:</h3>
        <ol>
          <li>Ø§Ø®ØªØ± Ø§Ù„ØµÙˆØ± Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ Ø£Ùˆ Ø§Ø³Ø­Ø¨Ù‡Ø§ ÙˆØ£Ù„Ù‚Ù‡Ø§ ÙÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø®ØµØµØ©</li>
          <li>ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±ØªÙŠÙ† (Ø£ØµÙ„ÙŠ ÙˆÙ…Ø´ÙƒÙˆÙƒ ÙÙŠÙ‡) Ø£Ùˆ ØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø«Ù†ÙŠÙ†</li>
          <li>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø¨Ø¹Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØµÙˆØ±</li>
        </ol>
      </div>

      <div class="file-upload">
        <h3><i class="fas fa-images"></i> Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ù„Ù„ØªØ­Ù„ÙŠÙ„</h3>
        <input type="file" id="fileUpload" accept="image/*" multiple>
      </div>

      <div class="image-previews">
        <div class="image-preview">
          <div class="region-label">Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ø£ØµÙ„ÙŠ</div>
          <img id="originalPreview" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='350' height='200' viewBox='0 0 350 200'%3E%3Crect width='100%25' height='100%25' fill='%232a2a2a'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='16' fill='%23777'%3EØ§Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ø£ØµÙ„ÙŠ%3C/text%3E%3C/svg%3E" alt="Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø£ØµÙ„">
          <p>Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ø£ØµÙ„ÙŠ</p>
        </div>
        
        <div class="image-preview">
          <div class="region-label">Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ù…Ø´ÙƒÙˆÙƒ ÙÙŠÙ‡</div>
          <img id="checkPreview" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='350' height='200' viewBox='0 0 350 200'%3E%3Crect width='100%25' height='100%25' fill='%232a2a2a'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='16' fill='%23777'%3EØ§Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ù…Ø´ÙƒÙˆÙƒ ÙÙŠÙ‡%3C/text%3E%3C/svg%3E" alt="Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØªØ­Ù‚Ù‚">
          <p>Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ù…Ø´ÙƒÙˆÙƒ ÙÙŠÙ‡</p>
        </div>
      </div>

      <div class="controls">
        <button id="uploadAnalyzeBtn" onclick="analyzeUploadedImages()">
          <i class="fas fa-search"></i> ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª
        </button>
      </div>

      <div class="results-container" id="uploadResultsContainer">
        <div class="results-header">
          <i class="fas fa-chart-line"></i> Ù†ØªØ§Ø¦Ø¬ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª
        </div>
        <div id="uploadResults">Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø£ÙˆÙ„Ø§Ù‹</div>
      </div>
    </div>

    <!-- Single Image Tab -->
    <div id="single-tab" class="tab-content">
      <div class="instructions">
        <h3><i class="fas fa-file-image"></i> ØªØ­Ù„ÙŠÙ„ Ù…Ø³ØªÙ†Ø¯ÙŠÙ† ÙÙŠ ØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø©:</h3>
        <ol>
          <li>Ø§Ø®ØªØ± ØµÙˆØ±Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø³ØªÙ†Ø¯ÙŠÙ† Ø¨Ø¬ÙˆØ§Ø± Ø¨Ø¹Ø¶Ù‡Ù…Ø§</li>
          <li>Ø³ÙŠÙ‚ÙˆÙ… Ø§Ù„Ù†Ø¸Ø§Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨ØªÙ‚Ø³ÙŠÙ… Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Ù…Ù†Ø·Ù‚ØªÙŠÙ†</li>
          <li>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ÙØµÙ„Ø©</li>
        </ol>
      </div>

      <div class="file-upload">
        <h3><i class="fas fa-cloud-upload-alt"></i> Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø³ØªÙ†Ø¯ÙŠÙ†</h3>
        <input type="file" id="singleImageUpload" accept="image/*">
      </div>

      <div class="image-previews">
        <div class="image-preview">
          <div class="region-label">Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©</div>
          <img id="singleImagePreview" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='350' height='200' viewBox='0 0 350 200'%3E%3Crect width='100%25' height='100%25' fill='%232a2a2a'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='16' fill='%23777'%3EØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªÙ†Ø¯ÙŠÙ†%3C/text%3E%3C/svg%3E" alt="Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©">
          <p>Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©</p>
        </div>
      </div>

      <div class="controls">
        <button id="singleImageAnalyzeBtn" onclick="analyzeSingleImage()">
          <i class="fas fa-search"></i> ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ†Ø¯ÙŠÙ†
        </button>
      </div>

      <div class="results-container" id="singleImageResultsContainer">
        <div class="results-header">
          <i class="fas fa-file-contract"></i> Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ù„ÙŠÙ„
        </div>
        <div id="singleImageResults">Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø³ØªÙ†Ø¯ÙŠÙ†</div>
      </div>
    </div>

    <footer>
      <p><i class="fas fa-code"></i> Ù…: Ø±Ø£ÙØª Ø¹Ù…Ø± â€” RQEEB Project Â© 2025 | Ø§Ù„Ø¥ØµØ¯Ø§Ø± 4.0 Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</p>
      <p><i class="fas fa-shield-alt"></i> Ù†Ø¸Ø§Ù… Ù…ØªÙƒØ§Ù…Ù„ Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª ÙˆØ§Ù„ÙƒØ´Ù Ø¹Ù† Ø§Ù„ØªØ²ÙˆÙŠØ±</p>
    </footer>
  </div>

  <script>
    // Ø¹Ù†Ø§ØµØ± ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    const video = document.getElementById("video");
    const analyzeBtn = document.getElementById("analyzeBtn");
    const confirmBtn = document.getElementById("confirmBtn");
    const resultsContainer = document.getElementById("resultsContainer");
    const resultsDiv = document.getElementById("results");
    const cameraStatus = document.getElementById("cameraStatus");
    const canvas = document.createElement("canvas");
    const ctx = canvas.getContext("2d");
    const tabButtons = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');
    
    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
    navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } })
      .then(stream => {
        video.srcObject = stream;
        cameraStatus.innerHTML = '<i class="fas fa-check-circle"></i> Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø¬Ø§Ù‡Ø²Ø© - ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø¯Ø¡';
        cameraStatus.style.color = '#00cc66';
      })
      .catch(err => {
        cameraStatus.innerHTML = '<i class="fas fa-exclamation-triangle"></i> ÙØ´Ù„ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ - ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª';
        cameraStatus.style.color = '#ff3333';
        analyzeBtn.disabled = true;
      });
    
    // Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
    tabButtons.forEach(button => {
      button.addEventListener('click', () => {
        const tabId = button.getAttribute('data-tab');
        
        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Ø´Ø§Ø· Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
        tabButtons.forEach(btn => btn.classList.remove('active'));
        // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª
        tabContents.forEach(content => content.classList.remove('active'));
        
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø´Ø§Ø· Ù„Ù„Ø²Ø± Ø§Ù„Ù…Ø­Ø¯Ø¯
        button.classList.add('active');
        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø­Ø¯Ø¯
        document.getElementById(tabId).classList.add('active');
      });
    });
    
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©
    function loadImage(file) {
      return new Promise((res, rej) => {
        const reader = new FileReader();
        reader.onload = () => {
          const img = new Image();
          img.src = reader.result;
          img.onload = () => res(img);
          img.onerror = rej;
        };
        reader.readAsDataURL(file);
      });
    }
    
    // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ ØªØ¯Ø±Ø¬ Ø§Ù„Ø±Ù…Ø§Ø¯ÙŠ
    function convertToGrayscale(canvas) {
      const tempCanvas = document.createElement("canvas");
      const tempCtx = tempCanvas.getContext("2d");
      tempCanvas.width = canvas.width;
      tempCanvas.height = canvas.height;
      tempCtx.drawImage(canvas, 0, 0);
      
      const imageData = tempCtx.getImageData(0, 0, canvas.width, canvas.height);
      const data = imageData.data;
      
      for (let i = 0; i < data.length; i += 4) {
        const avg = (data[i] + data[i + 1] + data[i + 2]) / 3;
        data[i] = avg;
        data[i + 1] = avg;
        data[i + 2] = avg;
      }
      
      tempCtx.putImageData(imageData, 0, 0);
      return tempCanvas;
    }
    
    // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†Ø³ÙŠØ¬ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø±Ø´Ø­ Gabor (Ù…Ø­Ø³Ù†)
    function analyzeGaborTexture(canvas) {
      const ctx = canvas.getContext("2d");
      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
      const data = imageData.data;
      
      let textureScore = 0;
      let pixelCount = 0;
      
      // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø§Ø®ØªÙ„Ø§ÙØ§Øª Ø¨ÙŠÙ† Ø§Ù„Ø¨ÙƒØ³Ù„Ø§Øª Ø§Ù„Ù…Ø¬Ø§ÙˆØ±Ø©
      for (let y = 1; y < canvas.height - 1; y++) {
        for (let x = 1; x < canvas.width - 1; x++) {
          const idx = (y * canvas.width + x) * 4;
          const center = data[idx];
          
          // Ø­Ø³Ø§Ø¨ Ø§Ù„ÙØ±ÙˆÙ‚ Ù…Ø¹ Ø§Ù„Ø¬ÙˆØ§Ø±
          let diffSum = 0;
          diffSum += Math.abs(center - data[idx - 4]);        // ØºØ±Ø¨
          diffSum += Math.abs(center - data[idx + 4]);        // Ø´Ø±Ù‚
          diffSum += Math.abs(center - data[idx - canvas.width * 4]); // Ø´Ù…Ø§Ù„
          diffSum += Math.abs(center - data[idx + canvas.width * 4]); // Ø¬Ù†ÙˆØ¨
          
          textureScore += diffSum;
          pixelCount++;
        }
      }
      
      return textureScore / pixelCount;
    }
    
    // ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… FFT (Ù…Ø­Ø³Ù†)
    function analyzeFrequency(canvas) {
      const ctx = canvas.getContext("2d");
      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
      const data = imageData.data;
      
      // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø±Ù…Ø§Ø¯ÙŠØ©
      const grayData = [];
      for (let i = 0; i < data.length; i += 4) {
        grayData.push((data[i] + data[i + 1] + data[i + 2]) / 3);
      }
      
      // ØªØ·Ø¨ÙŠÙ‚ FFT
      const fft = FFT.fft(grayData);
      const magnitudes = FFT.util.fftMag(fft);
      
      // Ø­Ø³Ø§Ø¨ Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù„ÙŠØ©
      const total = magnitudes.reduce((a, b) => a + b, 0);
      const highFreq = magnitudes.slice(magnitudes.length / 2).reduce((a, b) => a + b, 0);
      
      return (highFreq / total) * 100;
    }
    
    // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…ØªÙ‚Ø¯Ù… (Ù…Ø­Ø³Ù†)
    function analyzeColor(canvas) {
      const ctx = canvas.getContext("2d");
      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
      const data = imageData.data;
      
      let rSum = 0, gSum = 0, bSum = 0;
      let count = 0;
      
      for (let i = 0; i < data.length; i += 4) {
        rSum += data[i];
        gSum += data[i + 1];
        bSum += data[i + 2];
        count++;
      }
      
      const rAvg = rSum / count;
      const gAvg = gSum / count;
      const bAvg = bSum / count;
      
      // ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ LAB
      const lab = rgbToLab(rAvg, gAvg, bAvg);
      
      // ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ HSV
      const hsv = rgbToHsv(rAvg, gAvg, bAvg);
      
      return {
        rgb: { r: rAvg, g: gAvg, b: bAvg },
        lab,
        hsv
      };
    }
    
    // ØªØ­ÙˆÙŠÙ„ RGB Ø¥Ù„Ù‰ LAB
    function rgbToLab(r, g, b) {
      // ØªØ­ÙˆÙŠÙ„ RGB Ø¥Ù„Ù‰ XYZ
      r /= 255; g /= 255; b /= 255;
      
      r = r > 0.04045 ? Math.pow((r + 0.055) / 1.055, 2.4) : r / 12.92;
      g = g > 0.04045 ? Math.pow((g + 0.055) / 1.055, 2.4) : g / 12.92;
      b = b > 0.04045 ? Math.pow((b + 0.055) / 1.055, 2.4) : b / 12.92;
      
      let x = (r * 0.4124 + g * 0.3576 + b * 0.1805) / 0.95047;
      let y = (r * 0.2126 + g * 0.7152 + b * 0.0722) / 1.00000;
      let z = (r * 0.0193 + g * 0.1192 + b * 0.9505) / 1.08883;
      
      x = x > 0.008856 ? Math.pow(x, 1/3) : (7.787 * x) + 16/116;
      y = y > 0.008856 ? Math.pow(y, 1/3) : (7.787 * y) + 16/116;
      z = z > 0.008856 ? Math.pow(z, 1/3) : (7.787 * z) + 16/116;
      
      return {
        l: (116 * y) - 16,
        a: 500 * (x - y),
        b: 200 * (y - z)
      };
    }
    
    // ØªØ­ÙˆÙŠÙ„ RGB Ø¥Ù„Ù‰ HSV
    function rgbToHsv(r, g, b) {
      r /= 255; g /= 255; b /= 255;
      const max = Math.max(r, g, b), min = Math.min(r, g, b);
      let h, s, v = max;
      const d = max - min;
      s = max === 0 ? 0 : d / max;
      
      if (max === min) {
        h = 0;
      } else {
        switch (max) {
          case r: h = (g - b) / d + (g < b ? 6 : 0); break;
          case g: h = (b - r) / d + 2; break;
          case b: h = (r - g) / d + 4; break;
        }
        h /= 6;
      }
      
      return {
        h: h * 360,
        s: s * 100,
        v: v * 100
      };
    }
    
    // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¶ÙˆØ¶Ø§Ø¡ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø§Ù†Ø­Ø±Ø§Ù Ø§Ù„Ù…Ø¹ÙŠØ§Ø±ÙŠ (Ù…Ø­Ø³Ù†)
    function analyzeNoise(canvas) {
      const ctx = canvas.getContext("2d");
      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
      const data = imageData.data;
      
      // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø±Ù…Ø§Ø¯ÙŠØ©
      const values = [];
      for (let i = 0; i < data.length; i += 4) {
        values.push((data[i] + data[i + 1] + data[i + 2]) / 3);
      }
      
      // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ØªÙˆØ³Ø·
      const mean = values.reduce((a, b) => a + b, 0) / values.length;
      
      // Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ¨Ø§ÙŠÙ†
      const variance = values.reduce((a, b) => a + Math.pow(b - mean, 2), 0) / values.length;
      
      // Ø§Ù„Ø§Ù†Ø­Ø±Ø§Ù Ø§Ù„Ù…Ø¹ÙŠØ§Ø±ÙŠ
      return Math.sqrt(variance);
    }
    
    // ØªØ­Ù„ÙŠÙ„ Deepfake Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… TensorFlow.js
    async function analyzeDeepfake(img) {
      // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø³Ø¨Ù‚ Ø§Ù„ØªØ¯Ø±ÙŠØ¨
      const model = await tf.loadLayersModel('https://example.com/deepfake-model/model.json');
      
      // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØ±Ø©
      const tensor = tf.browser.fromPixels(img)
        .resizeNearestNeighbor([224, 224])
        .toFloat()
        .expandDims();
      
      // Ø§Ù„ØªÙ†Ø¨Ø¤
      const prediction = await model.predict(tensor).data();
      
      return prediction[0] > 0.5 ? 'Real' : 'Fake';
    }
    
    // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„
    async function startSingleImageAnalysis() {
      if (video.readyState < 2) {
        showError("ğŸ“· Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ØºÙŠØ± Ø¬Ø§Ù‡Ø²Ø© Ø¨Ø¹Ø¯");
        return;
      }

      // Ø¥Ø¸Ù‡Ø§Ø± Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„
      resultsContainer.classList.remove("hidden");
      confirmBtn.classList.add("hidden");
      resultsDiv.innerHTML = `
        <div class="status">
          <i class="fas fa-cogs"></i> Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ†Ø¯ÙŠÙ†...
        </div>
        <div class="progress-container">
          <progress value="0" max="100"></progress>
          <div style="text-align: center; margin-top: 5px; color: #aaa;">0%</div>
        </div>
      `;
      
      try {
        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙƒØ§Ù†ÙØ§Ø³
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

        // ØªØ­Ø¯ÙŠØ¯ Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ù…Ø³ØªÙ†Ø¯ÙŠÙ†
        const boxW = 240, boxH = 240;
        const region1 = ctx.getImageData(30, 50, boxW, boxH);
        const region2 = ctx.getImageData(canvas.width - boxW - 30, 50, boxW, boxH);
        
        // Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
        const texture1 = analyzeGaborTexture(region1);
        const texture2 = analyzeGaborTexture(region2);
        const textureDiff = Math.abs(texture1 - texture2);
        
        const freq1 = analyzeFrequency(region1);
        const freq2 = analyzeFrequency(region2);
        const freqDiff = Math.abs(freq1 - freq2);
        
        const color1 = analyzeColor(region1);
        const color2 = analyzeColor(region2);
        
        const rgbDiff = Math.abs(color1.rgb.r - color2.rgb.r) + 
                        Math.abs(color1.rgb.g - color2.rgb.g) + 
                        Math.abs(color1.rgb.b - color2.rgb.b);
        
        const labDiff = Math.abs(color1.lab.l - color2.lab.l) + 
                       Math.abs(color1.lab.a - color2.lab.a) + 
                       Math.abs(color1.lab.b - color2.lab.b);
        
        const hsvDiff = Math.abs(color1.hsv.h - color2.hsv.h) + 
                       Math.abs(color1.hsv.s - color2.hsv.s) + 
                       Math.abs(color1.hsv.v - color2.hsv.v);
        
        const colorMatch = (rgbDiff + labDiff + hsvDiff) / 3;
        
        const noise1 = analyzeNoise(region1);
        const noise2 = analyzeNoise(region2);
        const noiseDiff = Math.abs(noise1 - noise2);
        
        // ØªØ­Ù„ÙŠÙ„ Deepfake
        const deepfakeResult = await analyzeDeepfake(video);
        
        // Ø­Ø³Ø§Ø¨ Ø¯Ø±Ø¬Ø© Ø§Ù„ØªØ·Ø§Ø¨Ù‚
        const textureWeight = 0.35;
        const freqWeight = 0.25;
        const colorWeight = 0.25;
        const noiseWeight = 0.15;
        
        // ØªØ·Ø¨ÙŠØ¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        const maxTextureDiff = 50;
        const maxFreqDiff = 30;
        const maxColorDiff = 200;
        const maxNoiseDiff = 20;
        
        const textureScore = Math.max(0, 100 - (textureDiff / maxTextureDiff) * 100);
        const freqScore = Math.max(0, 100 - (freqDiff / maxFreqDiff) * 100);
        const colorScore = Math.max(0, 100 - (colorMatch / maxColorDiff) * 100);
        const noiseScore = Math.max(0, 100 - (noiseDiff / maxNoiseDiff) * 100);
        
        // Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© (Ù…ØªÙˆØ³Ø· Ù…Ø±Ø¬Ø­)
        const score = (textureScore * textureWeight) +
                     (freqScore * freqWeight) +
                     (colorScore * colorWeight) +
                     (noiseScore * noiseWeight);
        
        // ØªØ­Ø¯ÙŠØ¯ Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„
        let verdict = "";
        let verdictClass = "";
        
        if (score >= 90) {
          verdict = "âœ… ØªØ·Ø§Ø¨Ù‚ ØªØ§Ù… - Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Ù† Ù…ØªØ·Ø§Ø¨Ù‚Ø§Ù†";
          verdictClass = "safe";
        } else if (score >= 75) {
          verdict = "âš ï¸ ØªØ·Ø§Ø¨Ù‚ Ø¬Ø²Ø¦ÙŠ - ØªØ­Ù‚Ù‚ ÙŠØ¯ÙˆÙŠ Ù…ÙˆØµÙ‰ Ø¨Ù‡";
          verdictClass = "warning";
        } else if (score >= 60) {
          verdict = "âš ï¸ ØªØ·Ø§Ø¨Ù‚ Ù…Ù†Ø®ÙØ¶ - ØªØ²ÙˆÙŠØ± Ù…Ø­ØªÙ…Ù„";
          verdictClass = "warning";
        } else {
          verdict = "âŒ ØªØ·Ø§Ø¨Ù‚ Ø¶Ø¹ÙŠÙ Ø¬Ø¯Ù‹Ø§ - ØªØ²ÙˆÙŠØ± Ù…Ø¤ÙƒØ¯";
          verdictClass = "danger";
        }

        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©
        resultsDiv.innerHTML = `
          <div class="result-header">
            <i class="fas fa-chart-line"></i> Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
          </div>
          
          <div class="metrics-grid">
            <div class="metric">
              <div class="metric-label">Ù†Ø³ÙŠØ¬ Ø§Ù„ÙˆØ±Ù‚</div>
              <div class="metric-value">${textureScore.toFixed(1)}%</div>
              <div class="metric-desc">${textureDiff.toFixed(2)} ÙØ±Ù‚</div>
            </div>
            
            <div class="metric">
              <div class="metric-label">ØªØ±Ø¯Ø¯Ø§Øª Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©</div>
              <div class="metric-value">${freqScore.toFixed(1)}%</div>
              <div class="metric-desc">${freqDiff.toFixed(2)} ÙØ±Ù‚</div>
            </div>
            
            <div class="metric">
              <div class="metric-label">Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù„ÙˆÙ†ÙŠ</div>
              <div class="metric-value">${colorScore.toFixed(1)}%</div>
              <div class="metric-desc">${colorMatch.toFixed(2)} ÙØ±Ù‚</div>
            </div>
            
            <div class="metric">
              <div class="metric-label">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¶ÙˆØ¶Ø§Ø¡</div>
              <div class="metric-value">${noiseScore.toFixed(1)}%</div>
              <div class="metric-desc">${noiseDiff.toFixed(2)} ÙØ±Ù‚</div>
            </div>
          </div>
          
          <div class="verdict ${verdictClass}">
            <i class="fas fa-${verdictClass === 'safe' ? 'check-circle' : verdictClass === 'warning' ? 'exclamation-triangle' : 'times-circle'}"></i>
            ${verdict}
          </div>
          
          <div class="analysis-details">
            <h3><i class="fas fa-info-circle"></i> ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©:</h3>
            <p>â€¢ Ù†ØªÙŠØ¬Ø© ØªØ­Ù„ÙŠÙ„ Deepfake: ${deepfakeResult}</p>
            <p>â€¢ ÙØ±Ù‚ Ù†Ø³ÙŠØ¬ Ø§Ù„ÙˆØ±Ù‚: ${textureDiff.toFixed(2)} (Ø£Ø¹Ù„Ù‰ = Ø£ØµÙ„ÙŠ)</p>
            <p>â€¢ Ø§Ø®ØªÙ„Ø§Ù ØªØ±Ø¯Ø¯Ø§Øª Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©: ${freqDiff.toFixed(2)}</p>
            <p>â€¢ ÙØ±Ù‚ Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙÙŠ Ù…Ø³Ø§Ø­Ø© LAB: ${labDiff.toFixed(2)}</p>
            <p>â€¢ ÙØ±Ù‚ Ø§Ù„Ø¶ÙˆØ¶Ø§Ø¡ ÙˆØ§Ù„ØªØ­Ø±ÙŠÙ: ${noiseDiff.toFixed(2)}</p>
          </div>
        `;
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„ÙØ¹Ù„ÙŠ ÙÙ‚Ø· Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¬ÙŠØ¯Ø©
        if (score >= 70) {
          confirmBtn.classList.remove("hidden");
        }

      } catch (error) {
        console.error(error);
        showError("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©: " + error.message);
      }
    }
    
    // ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø©
    function confirmMatch() {
      resultsDiv.innerHTML += `
        <div class="verdict safe">
          <i class="fas fa-check-circle"></i> ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„ÙØ¹Ù„ÙŠ Ø¨Ù†Ø¬Ø§Ø­ - Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ù…ØªØ·Ø§Ø¨Ù‚Ø©
        </div>
        <div class="analysis-details">
          <h3><i class="fas fa-clipboard-check"></i> Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ù…ØªØ¨Ø¹Ø©:</h3>
          <p>â€¢ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØ­Ù‚Ù‚ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</p>
          <p>â€¢ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø±Ù‚Ù…ÙŠ Ù„Ù„Ù†ØªØ§Ø¦Ø¬</p>
          <p>â€¢ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø¨Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØ­Ù‚Ù‚</p>
        </div>
      `;
      
      // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ù„ØªØ£ÙƒÙŠØ¯
      analyzeBtn.disabled = true;
      confirmBtn.disabled = true;
    }
    
    // Ø¹Ø±Ø¶ Ø®Ø·Ø£
    function showError(message) {
      resultsContainer.classList.remove("hidden");
      resultsDiv.innerHTML = `
        <div class="verdict danger">
          <i class="fas fa-exclamation-circle"></i> ${message}
        </div>
        <div class="analysis-details">
          <h3><i class="fas fa-info-circle"></i> Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©:</h3>
          <p>â€¢ ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆØªÙØ¹ÙŠÙ„ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª</p>
          <p>â€¢ Ø£Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© ÙˆØ­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</p>
          <p>â€¢ ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ø³ØªÙ†Ø¯ÙŠÙ† Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</p>
        </div>
      `;
    }
    
    // ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø©
    async function analyzeUploadedImages() {
      // ØªÙ†ÙÙŠØ° Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ù„Ù„ØµÙˆØ± Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø©
    }
    
    // ØªØ­Ù„ÙŠÙ„ ØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø³ØªÙ†Ø¯ÙŠÙ†
    async function analyzeSingleImage() {
      // ØªÙ†ÙÙŠØ° Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ù„ØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø©
    }
    
    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
    window.onload = function() {
      // ØªÙ‡ÙŠØ¦Ø© Ø¥Ø¶Ø§ÙÙŠØ©
    };
  </script>
</body>
</html>
